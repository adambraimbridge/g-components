import { useContext } from 'react';
import { Meta, Story, Preview } from '@storybook/addon-docs/blocks';
import Feature, { Context } from './';
import '../shared/critical-path.scss';

export const defaultFlags = {
  prod: false,
  errorReporting: true,
  analytics: false,
  googleAnalytics: false,
  ads: false,
  mainImage: true,
  summary: true,
  bylines: true,
  onwardjourney: true,
  shareButtons: true,
  header: true,
  footer: true,
  comments: true,
  data: false,
  dark: true,
};

export const DEFAULTS = {
  flags: defaultFlags,
  url: 'https://local.ft.com/',
  summary: 'This is a standfirst',
  topic: {
    url: 'https://local.ft.com/',
    name: 'Testing',
  },
  bylines: [{ name: 'Ændrew Rininsland', url: 'https://ft.com/ændrew-rininsland' }],
  image: {
    uuid: 'f07ccec8-7ded-11e8-af48-190d103e32a4',
  },
  headline: 'New Starter Kit site',
  title: 'New Starter Kit site',
  id: '3a499586-b2e0-11e4-a058-00144feab7de',
  pubdate: new Date('2018-07-25T17:43:37.00Z').toISOString(),
  buildTime: new Date('2018-07-25T17:43:37.00Z').toISOString(),
  ads: {
    gptSite: 'test.5887.origami', // Ad unit hierarchy makes ads more granular.
    gptZone: false, // Start with ft.com and /companies /markets /world as appropriate to your story
    targeting: false, // granular targeting is optional and will be specified by the ads team
  },
};

export const ExampleBackground = ({ page }) => (
  <div
    style={{
      backgroundImage: 'url(https://placeimg.com/640/480/any)',
      backgroundSize: 'cover',
      flex: 1,
      filter: page > 0 && 'blur(8px)',
    }}
  />
);

export const ExampleForeground = ({ page }) => (
  <div style={{ flex: 1, color: 'white' }}>
    <h3>You are on page {page}</h3>
  </div>
);

<Meta title="Layouts|Feature" component={Feature} />

# Feature Layout component

`<Feature />` is a type of layout that enables a
carousel-esque experience on desktop and a paged
layout on mobile.

<Preview>
  <Story name="Basic">
    <Feature {...DEFAULTS} background={ExampleBackground} foreground={ExampleForeground}>
      <div>
        <h1>Slide 1!</h1>
        <h3>Another line on slide 1!</h3>
      </div>
      <h1>Slide 2!</h1>
      <h1>Slide 3!</h1>
      <h1>Slide 4!</h1>
      <h1>Slide 5!</h1>
    </Feature>
  </Story>
</Preview>
